# –ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
from Characters import *

# –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã
artifact_pool_file = 'artifact_pool.txt'     # –ö–æ–ø–∏–ª–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
user_artifacts_file = 'user_artifacts.txt'   # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–≥—Ä–æ–∫–∞

'''–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ø–∏–ª–∫–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤'''
def create_artifact_pool():
    artifacts = [
        'Ô∏èüõ°Ô∏è –©–∏—Ç',
        '‚öîÔ∏è –ö–∏–Ω–∂–∞–ª—ã',
        'üß• –ë—Ä–æ–Ω—è',
        'üó∫Ô∏è –í–æ–ª—à–µ–±–Ω–∞—è –∫–∞—Ä—Ç–∞',
        'üèπ –î–µ—Ä–µ–≤—è–Ω–Ω—ã–π –ª—É–∫',
        'üß≠ –ö–æ–º–ø–∞—Å',
        'üëª –ü–ª–∞—â-–Ω–µ–≤–∏–¥–∏–º–∫–∞',
        'ü¶Ñ –ï–¥–∏–Ω–æ—Ä–æ–≥',
    ]

    # –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª artifact_pool.txt –≤ —Ä–µ–∂–∏–º–µ –∑–∞–ø–∏—Å–∏ 'w'
    with open(artifact_pool_file, 'w', encoding='utf-8') as f:
        # –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º –≤ —Å–ø–∏—Å–∫–µ
        for artifact in artifacts:
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Ñ–∞–π–ª
            f.write(artifact + '\n')

    print('‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∫–æ–ø–∏–ª–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤!')
    return artifacts

'''–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ø–∏–ª–∫–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤'''
def load_artifact_pool():
    artifacts = []
    # –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª artifact_pool.txt –≤ —Ä–µ–∂–∏–º–µ —á—Ç–µ–Ω–∏—è  'r'
    with open(artifact_pool_file, 'r', encoding='utf-8') as f:
        # –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ
        for line in f:
            # –£–¥–∞–ª—è–µ—Ç –ø—Ä–æ–±–µ–ª—ã
            artifact = line.strip()
            # –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            if artifact:
                # –î–æ–±–∞–≤–ª—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ —Å–ø–∏—Å–æ–∫
                artifacts.append(artifact)
    return artifacts

'''–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–ø–∏–ª–∫–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤'''
def save_artifact_pool(artifacts):
    # –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª artifact_pool.txt –≤ —Ä–µ–∂–∏–º–µ –∑–∞–ø–∏—Å–∏ 'w'
    with open(artifact_pool_file, 'w', encoding='utf-8') as f:
        # –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –∫–∞–∂–¥–æ–º—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É
        for artifact in artifacts:
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Ñ–∞–π–ª
            f.write(artifact + '\n')

'''–í—ã–±–æ—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤'''
def choose_artifacts():
    # –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–ø–∏–ª–∫—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    artifacts = load_artifact_pool()

    # –ö–æ–ø–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
    original_artifacts = artifacts.copy()
    # –°–ø–∏—Å–æ–∫ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    # True - –≤—ã–±—Ä–∞–Ω, False - –¥–æ—Å—Ç—É–ø–µ–Ω
    selected_flags = [False] * len(artifacts)

    # –°–ø–∏—Å–æ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–º
    player_artifacts = []

    # –ò–≥—Ä–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç 3 –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
    for choice_num in range(1, 4):
        # –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –µ—Å–ª–∏ –≤—ã–±–æ—Ä –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
        while True:
            try:
                # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
                print('\n–î–æ—Å—Ç—É–ø–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:')
                # –°–æ–∑–¥–∞–µ—Ç –ø–∞—Ä—ã –Ω–æ–º–µ—Ä, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
                for i, artifact in enumerate(original_artifacts, 1):
                    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—ã–±—Ä–∞–Ω –ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
                    status = '[–í—ã–±—Ä–∞–Ω–æ]' if selected_flags[i - 1] else ''
                    # –í—ã–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –∏ —Å—Ç–∞—Ç—É—Å
                    print(f'{i}. {artifact} {status}')

                # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É –∏–≥—Ä–æ–∫–∞ –Ω–æ–º–µ—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
                choice = int(input(f'\n–í—ã–±–µ—Ä–∏—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç: '))

                # –ï—Å–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤—Ö–æ–¥–∏—Ç –≤ –¥–∏–∞–ø–∞–∑–æ–Ω
                if 1 <= choice <= len(original_artifacts):
                    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –≤—ã–±—Ä–∞–Ω –ª–∏ —É–∂–µ —ç—Ç–æ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
                    if selected_flags[choice - 1]:
                        print('‚ùå –≠—Ç–æ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —É–∂–µ –≤—ã–±—Ä–∞–Ω! –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π.')
                        continue

                    # –í—ã–±—Ä–∞–Ω–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
                    selected = original_artifacts[choice - 1]
                    # –î–æ–±–∞–≤–ª—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞
                    player_artifacts.append(selected)
                    # –ü–æ–º–µ—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, –∫–∞–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã–π
                    selected_flags[choice - 1] = True

                    # –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
                    if choice == 1:   # –©–∏—Ç
                        Hero.shield = True
                        print('–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å üõ°Ô∏è –©–∏—Ç! –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –º–µ–Ω—å—à–µ —É—Ä–æ–Ω–∞.')
                    elif choice == 2:  # –ö–∏–Ω–∂–∞–ª—ã
                        Hero.knife = True
                        print('–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å ‚öîÔ∏è –ö–∏–Ω–∂–∞–ª—ã! –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞–Ω–æ—Å–∏—Ç—å –±–æ–ª—å—à–µ —É—Ä–æ–Ω–∞.')
                    elif choice == 3:  # –ë—Ä–æ–Ω—è
                        Hero.armor = True
                        print('–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å üß• –ë—Ä–æ–Ω—è! –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –º–µ–Ω—å—à–µ —É—Ä–æ–Ω–∞.')
                    elif choice == 5:  # –î–µ—Ä–µ–≤—è–Ω–Ω—ã–π –ª—É–∫
                        Hero.luk = True
                        print('–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å üèπ –î–µ—Ä–µ–≤—è–Ω–Ω—ã–π –ª—É–∫! –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–Ω–æ—Å–∏—Ç—å –±–æ–ª—å—à–µ —É—Ä–æ–Ω–∞.')
                    elif choice == 7:  # –ü–ª–∞—â-–Ω–µ–≤–∏–¥–∏–º–∫–∞
                        Hero.nevidimka = True
                        print('–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å üëª –ü–ª–∞—â-–Ω–µ–≤–∏–¥–∏–º–∫–∞! –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –º–µ–Ω—å—à–µ —É—Ä–æ–Ω–∞.')

                    break
                # –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
                else:
                    print(f'‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä! –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 8')
            except:
                print('–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ!')

    # –°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –∫–æ–ø–∏–ª–∫–∏ (–±–µ–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤)
    remain_artifacts = []

    # –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —Ñ–ª–∞–≥–∞–º
    for i, selected in enumerate(selected_flags):
        # –ï—Å–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –Ω–µ –≤—ã–±—Ä–∞–Ω
        if not selected:
            # –î–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
            remain_artifacts.append(original_artifacts[i])

    # –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∫–æ–ø–∏–ª–∫—É
    save_artifact_pool(remain_artifacts)

    # –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–≥—Ä–æ–∫–∞ –≤ —Ñ–∞–π–ª–µ user_artifacts.txt
    with open(user_artifacts_file, 'w', encoding='utf-8') as f:
        for artifact in player_artifacts:
            f.write(artifact + '\n')

    return player_artifacts


'''–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞'''
def save_user_artifacts(artifacts):
    # –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª user_artifacts.txt –≤ —Ä–µ–∂–∏–º–µ –∑–∞–ø–∏—Å–∏ 'w'
    with open(user_artifacts_file, 'w', encoding='utf-8') as f:
        # –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –∫–∞–∂–¥–æ–º—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É
        for artifact in artifacts:
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Ñ–∞–π–ª
            f.write(artifact + '\n')

'''–£–¥–∞–ª–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤'''
def remove_artifacts(file, artifact_remove):
    # –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ —Ä–µ–∂–∏–º–µ —á—Ç–µ–Ω–∏—è 'r'
    with open(file, 'r', encoding='utf-8') as f:
        # –ß–∏—Ç–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫
        artifacts = f.readlines()

    # –û—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ–∫—Å—Ç artifact_remove
    new_artifacts = [artifact for artifact in artifacts if artifact_remove not in artifact]

    # –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª
    with open(file, 'w', encoding='utf-8') as f:
        # –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ñ–∞–π–ª
        f.writelines(new_artifacts)

'''–í–æ–∑–≤—Ä–∞—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –∫–æ–ø–∏–ª–∫—É'''
def return_artifacts_to_pool(user_artifacts, artifact_pool):
    # –î–æ–±–∞–≤–ª—è–µ—Ç –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–≥—Ä–æ–∫–∞ –≤ –æ–±—â—É—é –∫–æ–ø–∏–ª–∫—É
    # –ú–µ—Ç–æ–¥ extend() –¥–æ–±–∞–≤–ª—è–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ user_artifacts –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞ artifact_pool
    artifact_pool.extend(user_artifacts)

    # –û—á–∏—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞
    user_artifacts.clear()

    # –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∫–æ–ø–∏–ª–∫—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    save_artifact_pool(set(artifact_pool)) # set() –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–æ–≤
    # –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞
    save_user_artifacts(user_artifacts)

    print('‚úÖ –í—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –≤ –∫–æ–ø–∏–ª–∫—É!')
